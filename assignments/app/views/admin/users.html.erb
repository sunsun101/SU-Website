<h1>Admin Dashboard</h1>
<br>
<h3>Users</h3>
<table class= "table table-striped table-bordered table-hover">
  <thead style = "background-color:#506477; color:white">
    <tr>
      <th>Email</th>
      <th>Registered Date</th>
      <th>Status</th>
      <th>Edit</th>
    </tr>
  </thead>
  <tbody>
    <% if @users.each do |user| %>
      <tr>
        <td><%= user.email %></td>
        <td><%= user.created_at.strftime("%d/%m/%Y") %></td>
        <% if user.status == 'A' %>
          <td style="color:green">Active</td>
          <td><%= link_to 'Ban', :action => :users, :user_ban =>  user.id%></td>
        <% else %>
          <td style="color:red">Banned</td>
          <td><%= link_to 'UnBan', :action => :users, :user_unban =>  user.id%></td>
        <% end %>
      </tr>
    <% end.empty? %>
    <tr>
      <td colspan="4" style="text-align:center"> No users </td>
    </tr>
  <% end %>
</tbody>
</table>
<br>
<h5>User Registration Trend</h5>
<div id="curve_chart" style="width: 900px; height: 500px"></div>
<%# <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script> %>
<%= javascript_tag do -%>
  google.charts.load("current", { packages: ["corechart"] });
  google.charts.setOnLoadCallback(drawChart);
  function drawChart() {
  var data = JSON.parse('<%= @data.to_json.html_safe -%>');
  data = [['Year/Month', 'Count']].concat(data);
  data = google.visualization.arrayToDataTable(data);
  var options = {
  title: 'User Registration',
  curveType: 'function',
  legend: { position: 'bottom' }
  };
  var chart = new google.visualization.LineChart(document.getElementById('curve_chart'));
  chart.draw(data, options);
  }
<% end %>
