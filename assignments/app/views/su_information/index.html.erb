<div class="container">
  <div class="mt-3">
    <% if flash.any?%>
      <%= render 'layouts/alerts'%>
    <% end %>
    <h5>Student Union Information</h5>
  </div>
  <% if current_user&.is_admin %>
    <button type="button" class="btn btn-light" data-mdb-toggle="modal" data-mdb-target="#SUAddModal">
      <i class="fas fa-plus"></i>
      Add Member
    </button>
  <% end %>
  <div class="row">
    <% @su_members.each do |member| %>
      <div class="col-md-4  mt-5">
        <div class="card mb-4" style="max-width: 22rem;">
          <div class="card-body">
            <% if current_user&.is_admin %>
              <%= link_to  '#', 'data-mdb-target' => "#myModal_#{member.id}", 'data-mdb-toggle' => 'modal', style: 'float: right' do%>
                <i class="fas fa-edit" style = 'border-radius: 50%;'></i>
              <% end %>
              <br>
              <div class="modal fade" id='<%= "myModal_#{member.id}" %>' tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                <div class="modal-dialog">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title" id='<%= "myModal_#{member.id}" %>'>Edit Member - <%= member.first_name %></h5>
                      <button type="button" class="btn-close" data-mdb-dismiss="modal" aria-label="Close" ></button>
                    </div>
                    <div class="modal-body">
                      <%= render 'form', su_member: member %>
                    </div>
                  </div>
                </div>
              </div>
            <% end %>
            <div  class="image_container" style = "text-align:center">
              <% if member.avatar.attached? %>
                <%= image_tag(member.avatar,alt: "pp_image", class: "card-img-top circular_image")%>
              <% else %>
                <%= image_tag "pp.jpg",alt: "pp_image", class: "circular_image"%>
              <% end %>
            </div>
            <br>
            <br>
            <p style="text-align:center"><b><%= member.first_name + ' ' + member.last_name %></b></p>
            <p style="text-align:center"><%= member.designation %></p>
            <p style="text-align:center"><%= member.nationality %></p>
            <p style="text-align:center"><%= member.program + '/' + member.department %></p>
          </div>
        </div>
      </div>
    <% end %>
  </div>
  <!-- Modal -->
  <div class="modal fade" id="SUAddModal" tabindex="-1" aria-labelledby="SUAddModal" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="SUAddModal">Add member</h5>
          <button
          type="button"
          class="btn-close"
          data-mdb-dismiss="modal"
          aria-label="Close"
        ></button>
        </div>
        <div class="modal-body"><%= render 'form', su_member: @su_member%></div>
      </div>
    </div>
  </div>
</div>
